<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebAR 포토 오버레이 시스템</title>
    
    <!-- WebAR 라이브러리 -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    
    <!-- WebAR 시스템 CSS -->
    <link rel="stylesheet" href="styles/webaar-main.css">
</head>
<body>
    <!-- WebAR 메인 컨테이너 -->
    <div class="webaar-container">
        <!-- AR 씬 -->
        <a-scene 
            mindar-image="imageTargetSrc: ./assets/targets.mind; uiLoading: yes; uiError: yes; uiScanning: yes;"
            color-space="sRGB" 
            renderer="colorManagement: true, physicallyCorrectLights"
            vr-mode-ui="enabled: false" 
            device-orientation-permission-ui="enabled: false"
            embedded
            style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;">
            
            <!-- 에셋 정의 -->
            <a-assets>
                <!-- 비디오 에셋들 (동적으로 생성됨) -->
            </a-assets>
            
            <!-- AR 카메라 -->
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
            
            <!-- AR 타겟들 (동적으로 생성됨) -->
        </a-scene>
        
        <!-- UI 오버레이 -->
        <div class="ui-overlay">
            <!-- 로딩 화면 -->
            <div id="loading-screen" class="loading-screen">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h2>📸 WebAR 포토 오버레이</h2>
                    <p>카메라 초기화 중...</p>
                </div>
            </div>
            
            <!-- 스캔 안내 -->
            <div id="scan-guide" class="scan-guide" style="display: none;">
                <div class="guide-content">
                    <h3>📱 사진을 카메라에 비춰주세요</h3>
                    <p>등록된 사진을 인식하면 동영상이 자동 재생됩니다</p>
                    <div class="scan-frame"></div>
                </div>
            </div>
            
            <!-- 비디오 컨트롤 -->
            <div id="video-controls" class="video-controls" style="display: none;">
                <button id="muteBtn" class="control-btn">🔊</button>
                <button id="fullscreenBtn" class="control-btn">⛶</button>
                <button id="closeBtn" class="control-btn">✕</button>
            </div>
            
            <!-- 상태 표시 -->
            <div id="status-display" class="status-display">
                <span id="status-text">시스템 초기화 중...</span>
            </div>
        </div>
    </div>
    
    <!-- 관리자 패널 (개발/테스트용) -->
    <div id="admin-panel" class="admin-panel" style="display: none;">
        <h4>🛠️ 관리자 패널</h4>
        <div class="admin-controls">
            <button onclick="toggleAdminPanel()">패널 숨기기</button>
            <button onclick="reloadPhotoMappings()">매핑 새로고침</button>
            <button onclick="testARSystem()">AR 시스템 테스트</button>
        </div>
        <div class="mapping-list">
            <h5>등록된 사진-영상 매핑:</h5>
            <ul id="mapping-list"></ul>
        </div>
    </div>
    
    <!-- 관리자 패널 토글 버튼 -->
    <button id="admin-toggle" class="admin-toggle" onclick="toggleAdminPanel()">⚙️</button>
    
    <!-- WebAR 시스템 JavaScript -->
    <script src="js/webaar-system.js"></script>
</body>
</html> 